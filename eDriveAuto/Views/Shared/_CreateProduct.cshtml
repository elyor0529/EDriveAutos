@model Edrive.Edrivie_Service_Ref.Products
@*<script src="../../Scripts/jquery-1.4.4-vsdoc.js" type="text/javascript"></script>
*@
@Html.Hidden("prdId", ViewData["ProductID"])

<div id="tabcontainer">
    <ul>
        <li><a href="#tab-1"><span>Product Info </span></a></li>
        <li><a href="#tab-2"><span>Options </span></a></li>
        <li><a href="#tab-3"><span>Pictures</span></a></li>
    </ul>
    <div id="tab-1">
        <table class="adminContent">
            <tr>
                <td>
                    <table class="adminContent">
                        <tr id="trViewMessage" runat="server" visible="false">
                            <td colspan="4" style="color: Red">
                                @(ViewData["Msg"] ?? "")
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew" style="width: 231px;">
                                Vin
                            </td>
                            <td class="adminData">
                            <input type="hidden"  id="productId" name="productId" value="@(Model==null?0:Model.productId)"/>
                                
                                
                                
                                @Html.TextBoxFor(m => m.vin)
                                @Html.ValidationMessageFor(m => m.vin)

                                
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Type
                            </td>
                            <td class="adminData">
                                @Html.DropDownListFor(m => m.type, ViewData["Types"] as SelectList, "Select")
                                @Html.ValidationMessageFor(m => m.type)

                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                stock
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.stock)
                                @Html.ValidationMessageFor(m => m.stock)


                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Year
                            </td>
                            <td class="adminData">
                                @Html.DropDownListFor(m => m.Year, ViewData["Years"] as SelectList, "Select")
                           @Html.ValidationMessageFor(m => m.Year)
 </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Make
                            </td>
                            <td class="adminData">
                                
                                @Html.DropDownListFor(m => m.Make, ViewData["Makes"] as SelectList)
                                   @Html.ValidationMessageFor(m => m.Make)

                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Model
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.ModelName)
                                   @Html.ValidationMessageFor(m => m.Year)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Trim
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.trim)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Free Text
                            </td>
                            <td class="adminData">
                                @Html.TextAreaFor(m => m.free_Text)
                            </td>
                            <td>
                                This is where you describe special offers.Please do not add your phone number or
                                email here.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Body
                            </td>
                            <td class="adminData">
                                @*  @Html.DropDownListFor(m => m.body,new SelectList(ViewData["Body"] as List<Product_Body>,"id","body",ViewData["_body"]??""),"select" )
                                      *@
                                <select id="body" name="body">
                                    @{
                                        if (ViewData["Body"] != null)
                                        {
                                        <option value="">Select</option>
                                            
                                            var SelectedBody = ViewData["_body"]??"";
                                            foreach (var item in ((ViewData["Body"] as List<Product_Body>)))
                                            {
                                                if (item.id.ToString()== SelectedBody.ToString())
                                                {
                                        <option value="@item.id" selected="selected">
                                            @item.body

                                        </option>
                                                }
                                                else
                                                {
                                        <option value="@item.id">
                                            @item.body
                                        </option>
                                                }

                                            }

                                        }
                                    }
                                </select>
                                   @Html.ValidationMessageFor(m => m.body)
                                   @Html.Hidden("customerId", (Model==null?ViewData["CustomerID"]:Model.customerId))

                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Mileage
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.mileage)
                                   @Html.ValidationMessageFor(m => m.mileage)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                 Current Price
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.price_Current)
                                   @Html.ValidationMessageFor(m => m.price_Current)

                            </td>
                            <td>
                                This is your original retail price.
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Reserved
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.Reserved)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                               WholeSale Price 
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.price_WholeSale)
                                 @*  @Html.ValidationMessageFor(m => m.price_WholeSale)*@
                            </td>
                            <td>
                                This is the E-Drive price (must meet pricing criteria).
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Cost Price 
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.price_Cost)
                                  @* @Html.ValidationMessageFor(m => m.price_Cost)*@
                            </td>
                            <td>
                                Cost Price: This is what you paid for the vehicle.
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Title
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.Title)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                condition
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.condition)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Exterior Color
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.exterior)
                                   @Html.ValidationMessageFor(m => m.exterior)

                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Interior Color
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.interior)

                                     @Html.ValidationMessageFor(m => m.interior)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Doors
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.doors)
                                     @Html.ValidationMessageFor(m => m.doors)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Engine
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.engine)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Transmission
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.transmission)
                                     @Html.ValidationMessageFor(m => m.transmission)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Fuel Type
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.fuel_Type)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Drive Type
                            </td>
                            <td class="adminData">
                                @Html.TextBoxFor(m => m.drive_Type)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color: Red">*</span>
                            </td>
                            <td class="adminTitleNew">
                                Warranty
                            </td>
                            <td class="adminData">
                                <select id="warranty" name="warranty">
                                    <option value="-1">All</option>
                                    <option value="0">No</option>
                                    <option value="1">Yes</option>
                                </select>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Description
                            </td>
                            <td class="adminData">
                                @Html.TextAreaFor(m => m.descriptiont)
                            </td>
                            <td>
                                This is your primary description of the vehicle.
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                Date in Stock
                            </td>
                            <td class="adminData">
                                @Html.EditorFor(m => m.date_in_Stock)
                                     @Html.ValidationMessageFor(m => m.date_in_Stock)
                                @*<input type="text" value="@Model.date_in_Stock" />*@ <span style="padding-left: 5px">(mm/dd/yyyy e.g. 01/01/2012 )</span>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                @Html.LabelFor(m => m.ShowOnDealerProfile, "Show on Dealer’s Profile Page?:")
                            </td>
                            <td class="adminData">
                                @Html.CheckBoxFor(m => m.ShowOnDealerProfile)
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr id="trViewFeatur" runat="server">
                            <td>
                            </td>
                            <td class="adminTitleNew">
                                @Html.LabelFor(m => m.isfeature, "Is Featured?:")
                            </td>
                            <td class="adminData">
                                @Html.CheckBoxFor(m => m.isfeature)
                            </td>
                            <td>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        <div>
        @Html.ValidationSummary(true)
        </div>
    </div>
    <div id="tab-2">
        @Html.CheckBoxList(ViewData["Options"] as List<SelectListItem>, "ProductsOptions", new { @class = "prdOptions" })
    </div>
    <div id="tab-3">
        <div id="msgShow" style="color: Red; display: none">
            To add images first save the product.
        </div>
        <div id="addproductDiv">
            <table>
                <tr class="Head">
                    <td>Image
                    </td>
                    <td>Display Order
                    </td>
                    <td>Delete
                    </td>
                                </tr>
@{
                    if (ViewData["Pictures"] != null)
                    {

                        var pics = ViewData["Pictures"] as List<Product_Picture>;
                        foreach (var item in pics)
                        {
                            var backcolor=(pics.IndexOf(item)%2==0?"":"background-color:white");
                    <tr id="row_@(pics.IndexOf(item))">
                        <td class="ImagePic" style="@backcolor">
                            <img src="@item.PictureURL"  width="100%" />
                         
                            <input  type="hidden" name="PictureURL" id = 'PictureURL@(pics.IndexOf(item))'  value="@item.PictureURL"/>
                            <input  type="hidden" name="ProductPictureID" id = 'ProductPictureID@(pics.IndexOf(item))' value="@item.ProductPictureID" />

                            @*@Html.Hidden("PictureURL", item.PictureURL, new { id = "PictureURL" + pics.IndexOf(item).ToString() })
                            @Html.Hidden("ProductPictureID", item.ProductPictureID, new { id = "PictureID" + pics.IndexOf(item).ToString() })
*@
                        </td>
                        <td class="DisplayOrder" style="@backcolor">
                       <input type="text" name="PictureDisplayOrder" id="PictureDisplayOrder@(item.DisplayOrder)" value="@item.DisplayOrder" />
                           @* @Html.TextBox("PictureDisplayOrder", item.DisplayOrder, new { id = "PictureDisplayOrder" + pics.IndexOf(item).T
                           oString() })
*@
                        </td>
                        <td class="DelButton" style="@backcolor">
                            <input type="button" id="picDelete" value="delete" onclick="deletePicture(@pics.IndexOf(item));return false;" />
                        </td>
                    </tr>
                        }
                    }
                }
            </table>
            <table class="PicturUpload">
                <tr>
                    <td style="width: 150px;background-color:White;">
                        Select Picture
                    </td>
                    <td style="background-color:White">
                        <input type="file" id="ProductPic" name="ProductPic" />
                    </td>
                    <td style="width: 150px;background-color:White"> Get URL	
                    </td>
                    <td style="background-color:White">
                     @Html.TextBox("GetURL","")
                    </td>
                </tr>
                <tr>
                    <td style="width: 150px;background-color:White;">
                        Display Order
                    </td>
                    <td style="background-color:White">
                         @Html.TextBox("Displayorder1", "1")
                    </td>
                    <td style="width: 150px;background-color:White"> Display Order
                    </td>
                    <td style="background-color:White">
                    @Html.TextBox("Displayorder2", "1")
                    <input type="submit"   name="Upload" value="Add Url" id="AddUrl" />
                    </td>
                </tr>

                <tr>
                <td colspan="4">   <input type="submit" id="PicSave" name="Upload" value="Upload" />
                </td>
                </tr>
            </table>
        </div>
    </div>
    <table>
        <tr>
            <td>
                <input type="submit" name="Save" value="Save" />
            </td>
        </tr>
    </table>
</div>
<script type="text/javascript">
    
    $(document).ready(function () {
        $("#AddUrl").click(function (evt) {
            if ($("#GetURL").val() == "") {


                alert("--Please add url to be uploaded--");

                if (evt.preventDefault) { evt.preventDefault(); }
                else
                { evt.returnValue = false; }

            }
            var s=$("#GetURL").val();
            if(isUrl(s) == false) {
                alert("--Please add valid url for image--");
                if (evt.preventDefault) { evt.preventDefault(); }
                else
                { evt.returnValue = false; }

            }
            $("#Command").val("AddUrl");

        });
    });
    function deletePicture(id) {
        try {
            var res = confirm("--------Are You sure you want to delete this Image---");
            if (res == false) {
                return;
            }
            $("#row_" + id).remove();
        } catch (e) {
            alert(e.Message);
        }
    }
</script>
<script src="@Url.Content("~/Scripts/isUrl.js")" type="text/javascript"></script>
